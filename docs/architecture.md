# Огляд архітектури Gemini CLI

Цей документ надає високорівневий огляд архітектури Gemini CLI.

## Основні компоненти

Gemini CLI складається переважно з двох основних пакунків, а також набору
інструментів, які система використовує для обробки вводу з командного рядка:

1.  **Пакет CLI (`packages/cli`):**
    - **Призначення:** Містить частину Gemini CLI, з якою взаємодіє користувач.
      Відповідає за обробку вводу, відображення результату та загальний досвід
      користувача (UX).
    - **Основні функції:**
      - [Обробка вводу](/docs/cli/commands.md)
      - Керування історією
      - Рендеринг інтерфейсу
      - [Налаштування тем та інтерфейсу](/docs/cli/themes.md)
      - [Налаштування конфігурації CLI](/docs/get-started/configuration.md)

2.  **Пакет Core (`packages/core`):**
    - **Призначення:** Виступає як бекенд для Gemini CLI. Отримує запити від
      `packages/cli`, координує взаємодію з Gemini API та керує виконанням
      доступних інструментів.
    - **Основні функції:**
      - API-клієнт для зв'язку з Google Gemini API
      - Формування та керування підказками (prompts)
      - Логіка реєстрації та виконання інструментів
      - Керування станом розмов та сесій
      - Конфігурація на стороні сервера

3.  **Інструменти (`packages/core/src/tools/`):**
    - **Призначення:** Окремі модулі, що розширюють можливості моделі Gemini,
      дозволяючи їй взаємодіяти з локальним середовищем (наприклад, файловою
      системою, командами оболонки, веб-запитами).
    - **Взаємодія:** `packages/core` викликає ці інструменти на основі запитів
      від моделі Gemini.

## Потік взаємодії

Типова взаємодія з Gemini CLI відбувається за таким сценарієм:

1.  **Ввід користувача:** Користувач вводить підказку або команду в терміналі,
    якою керує `packages/cli`.
2.  **Запит до ядра:** `packages/cli` надсилає ввід користувача до
    `packages/core`.
3.  **Обробка запиту:** Пакет Core:
    - Формує відповідну підказку для Gemini API, включаючи історію розмови та
      визначення доступних інструментів.
    - Надсилає підказку до Gemini API.
4.  **Відповідь Gemini API:** Gemini API обробляє підказку та повертає
    відповідь. Це може бути пряма відповідь або запит на використання одного з
    інструментів.
5.  **Виконання інструменту (якщо потрібно):**
    - Коли Gemini API запитує інструмент, пакет Core готується до його
      виконання.
    - Якщо інструмент може змінювати файли або виконувати команди оболонки,
      користувач отримує деталі запиту і повинен підтвердити виконання.
    - Операції тільки для читання (наприклад, читання файлів) можуть не
      потребувати підтвердження.
    - Після підтвердження Core виконує дію, і результат надсилається назад до
      Gemini API.
    - Gemini API обробляє результат роботи інструменту та генерує фінальну
      відповідь.
6.  **Відповідь до CLI:** Пакет Core надсилає фінальну відповідь до
    `packages/cli`.
7.  **Відображення:** Пакет CLI форматує та виводить відповідь у термінал.

## Ключові принципи дизайну

- **Модульність:** Поділ на фронтенд (CLI) та бекенд (Core) дозволяє розробляти
  їх незалежно.
- **Розширюваність:** Система інструментів дозволяє легко додавати нові
  можливості.
- **Досвід користувача:** CLI зосереджений на наданні багатого та інтерактивного
  досвіду роботи в терміналі.
