# Хуки у Gemini CLI: Найкращі практики

Цей посібник охоплює питання безпеки, оптимізації продуктивності, методи
налагодження та конфіденційності при розробці хуків.

## Безпека

### Валідація вводу

Ніколи не довіряйте даним із хуків без перевірки. Вхідні дані можуть містити
шкідливий контент. Завжди перевіряйте структуру JSON та наявність обов'язкових
полів.

### Використання таймаутів

Встановлюйте розумні обмеження часу виконання, щоб хуки не блокували роботу
агента нескінченно.

- Швидка перевірка: 1-5 сек.
- Мережеві запити: 10-30 сек.
- Важкі обчислення: 30-60 сек.

### Пошук секретів

Використовуйте хуки `BeforeTool`, щоб запобігти випадковому збереженню ключів
API або паролів у коді.

## Продуктивність

### Швидкість — понад усе

Хуки працюють синхронно. Повільний хук сповільнює всю роботу ШІ. Використовуйте
паралельні операції (`Promise.all` у JS) та кешування важких результатів.

### Фільтрація через Matchers

Не запускайте хуки для всіх інструментів без потреби. Використовуйте точні назви
інструментів у налаштуваннях `matcher` замість символу `*`.

## Налагодження

### Логування у файли

Записуйте налагоджувальну інформацію у власні лог-файли всередині папки
`.gemini/hooks/`.

### Використання stderr

Повідомлення про помилки, виведені в `stderr`, будуть показані користувачеві або
агенту залежно від коду виходу.

### Перегляд панелі хуків

Команда `/hooks panel` показує статус виконання, кількість викликів та останні
помилки кожного хука.

## Конфіденційність

Зверніть увагу, що вхідні дані хуків можуть містити ваш код або підказки.

- Якщо `telemetry.logPrompts` увімкнено (типово), повний ввід/вивід хуків
  логується в телеметрію.
- Якщо вимкнено — логуються лише метадані (назва, час виконання, статус).
