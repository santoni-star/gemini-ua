# Налаштування аутентифікації Gemini CLI

Щоб використовувати Gemini CLI, вам потрібно пройти аутентифікацію в Google. Цей
посібник допоможе вам швидко знайти найкращий спосіб входу залежно від типу
вашого облікового запису та того, як ви використовуєте CLI.

Для більшості користувачів ми рекомендуємо запустити Gemini CLI та увійти за
допомогою особистого облікового запису Google.

## Оберіть метод аутентифікації <a id="auth-methods"></a>

Виберіть метод аутентифікації, який відповідає вашій ситуації, у таблиці нижче:

| Тип користувача / Сценарій                                     | Рекомендований метод аутентифікації                            | Чи потрібен проект Google Cloud                               |
| :------------------------------------------------------------- | :------------------------------------------------------------- | :------------------------------------------------------------ |
| Особисті облікові записи Google                                | [Вхід через Google](#login-google)                             | Ні, за деякими винятками                                      |
| Користувачі організацій (компанія, школа або Google Workspace) | [Вхід через Google](#login-google)                             | [Так](#set-gcp)                                               |
| Користувачі AI Studio з ключем Gemini API                      | [Використання ключа Gemini API](#gemini-api)                   | Ні                                                            |
| Користувачі Google Cloud Vertex AI                             | [Vertex AI](#vertex-ai)                                        | [Так](#set-gcp)                                               |
| [Безголовий режим (Headless)](#headless)                       | [Ключ Gemini API](#gemini-api) або<br> [Vertex AI](#vertex-ai) | Ні (для ключа Gemini API)<br> [Так](#set-gcp) (для Vertex AI) |

### Який у мене тип облікового запису Google?

- **Особисті облікові записи Google:** Включає всі
  [рахунки безкоштовного рівня](../quota-and-pricing/#free-usage), такі як
  Gemini Code Assist для фізичних осіб, а також платні підписки на
  [Google AI Pro та Ultra](https://gemini.google/subscriptions/).

- **Облікові записи організацій:** Облікові записи, що використовують платні
  ліцензії через організацію, таку як компанія, навчальний заклад або
  [Google Workspace](https://workspace.google.com/). Включає підписки
  [Google AI Ultra для бізнесу](https://support.google.com/a/answer/16345165).

## (Рекомендовано) Вхід через Google <a id="login-google"></a>

Якщо ви запускаєте Gemini CLI на локальній машині, найпростішим методом
аутентифікації є вхід за допомогою вашого облікового запису Google. Цей метод
вимагає веб-браузера на машині, яка може взаємодіяти з терміналом, де запущено
Gemini CLI (наприклад, ваша локальна машина).

> **Важливо:** Якщо ви є підписником **Google AI Pro** або **Google AI Ultra**,
> використовуйте обліковий запис Google, пов'язаний із вашою підпискою.

Щоб пройти аутентифікацію та почати роботу:

1. Запустіть CLI:

   ```bash
   gemini-ua
   ```

2. Виберіть **Login with Google**. Gemini CLI відкриє вікно входу у вашому
   веб-браузері. Дотримуйтесь інструкцій на екрані. Ваші облікові дані будуть
   збережені локально для майбутніх сеансів.

### Чи потрібно мені вказувати проект Google Cloud?

Більшість особистих облікових записів Google (безкоштовних і платних) не
потребують проекту Google Cloud для аутентифікації. Однак вам потрібно буде
вказати проект Google Cloud, якщо виконується хоча б одна з наступних умов:

- Ви використовуєте обліковий запис компанії, школи або Google Workspace.
- Ви використовуєте ліцензію Gemini Code Assist від програми розробників Google.
- Ви використовуєте ліцензію за підпискою Gemini Code Assist.

Інструкції дивіться у розділі [Встановлення проекту Google Cloud](#set-gcp).

## Використання ключа Gemini API <a id="gemini-api"></a>

Якщо ви не хочете проходити аутентифікацію за допомогою облікового запису
Google, ви можете скористатися ключем API з Google AI Studio.

Щоб використовувати Gemini CLI з ключем Gemini API:

1. Отримайте ключ API на
   [Google AI Studio](https://aistudio.google.com/app/apikey).

2. Встановіть змінну середовища `GEMINI_API_KEY`. Наприклад:

   ```bash
   # Замініть ВАШ_КЛЮЧ_API на отриманий ключ
   export GEMINI_API_KEY="ВАШ_КЛЮЧ_API"
   ```

   Щоб зробити це налаштування постійним, дивіться
   [Збереження змінних середовища](#persisting-vars).

3. Запустіть CLI:

   ```bash
   gemini-ua
   ```

4. Виберіть **Use Gemini API key**.

> **Попередження:** Поводьтеся з ключами API, особливо для таких сервісів, як
> Gemini, як із конфіденційними даними. Захищайте鏡 них, щоб запобігти
> несанкціонованому доступу та потенційному зловживанню сервісом від вашого
> імені.

## Використання Vertex AI <a id="vertex-ai"></a>

Щоб використовувати Gemini CLI з платформою Google Cloud Vertex AI, оберіть один
із наступних варіантів аутентифікації:

- A. Облікові дані за замовчуванням (ADC) за допомогою `gcloud`.
- B. JSON-ключ сервісного облікового запису.
- C. Ключ Google Cloud API.

Незалежно від методу аутентифікації для Vertex AI, вам потрібно встановити
`GOOGLE_CLOUD_PROJECT` (ID вашого проекту Google Cloud з увімкненим Vertex AI
API) та `GOOGLE_CLOUD_LOCATION` (локація ваших ресурсів Vertex AI).

Наприклад:

```bash
# Замініть на ID вашого проекту та бажану локацію (наприклад, us-central1)
export GOOGLE_CLOUD_PROJECT="ID_ВАШОГО_ПРОЕКТУ"
export GOOGLE_CLOUD_LOCATION="ЛОКАЦІЯ_ВАШОГО_ПРОЕКТУ"
```

Щоб зберегти ці налаштування, дивіться
[Збереження змінних середовища](#persisting-vars).

#### A. Vertex AI — облікові дані за замовчуванням (ADC) за допомогою `gcloud`

Використовуйте цей метод, якщо у вас встановлено Google Cloud CLI.

> **Примітка:** Якщо ви раніше встановлювали `GOOGLE_API_KEY` або
> `GEMINI_API_KEY`, вам потрібно їх видалити, щоб використовувати ADC:
>
> ```bash
> unset GOOGLE_API_KEY GEMINI_API_KEY
> ```

1. Переконайтеся, що у вас є проект Google Cloud і увімкнено Vertex AI API.

2. Увійдіть у Google Cloud:

   ```bash
   gcloud auth application-default login
   ```

3. [Налаштуйте свій проект Google Cloud](#set-gcp).

4. Запустіть CLI:

   ```bash
   gemini-ua
   ```

5. Виберіть **Vertex AI**.

#### B. Vertex AI — JSON-ключ сервісного облікового запису

Цей метод підходить для неінтерактивних середовищ, конвеєрів CI/CD або якщо ваша
організація обмежує створення ADC на основі користувачів.

> **Примітка:** Якщо ви раніше встановлювали `GOOGLE_API_KEY` або
> `GEMINI_API_KEY`, видаліть їх:
>
> ```bash
> unset GOOGLE_API_KEY GEMINI_API_KEY
> ```

1.  [Створіть сервісний обліковий запис та ключ](https://cloud.google.com/iam/docs/keys-create-delete)
    і завантажте JSON-файл. Призначте роль "Vertex AI User" цьому обліковому
    запису.

2.  Встановіть змінну середовища `GOOGLE_APPLICATION_CREDENTIALS` на абсолютний
    шлях до JSON-файлу:

    ```bash
    # Замініть /path/to/your/keyfile.json на реальний шлях
    export GOOGLE_APPLICATION_CREDENTIALS="/шлях/до/вашого/файлу_ключа.json"
    ```

3.  [Налаштуйте свій проект Google Cloud](#set-gcp).

4.  Запустіть CLI:

    ```bash
    gemini-ua
    ```

5.  Виберіть **Vertex AI**.
    > **Попередження:** Захищайте файл ключа сервісного облікового запису,
    > оскільки він надає доступ до ваших ресурсів.

#### C. Vertex AI — ключ Google Cloud API

1.  Отримайте ключ API Google Cloud:
    [Get an API Key](https://cloud.google.com/vertex-ai/generative-ai/docs/start/api-keys?usertype=newuser).

2.  Встановіть змінну середовища `GOOGLE_API_KEY`:

    ```bash
    export GOOGLE_API_KEY="ВАШ_КЛЮЧ_GOOGLE_API"
    ```

    > **Примітка:** Якщо ви бачите помилки на кшталт
    > `"API keys are not supported by this API..."`, ваша організація може
    > обмежувати використання ключів API. Спробуйте інші методи аутентифікації
    > Vertex AI.

3.  [Налаштуйте свій проект Google Cloud](#set-gcp).

4.  Запустіть CLI:

    ```bash
    gemini-ua
    ```

5.  Виберіть **Vertex AI**.

## Встановлення проекту Google Cloud <a id="set-gcp"></a>

> **Важливо:** Більшість особистих облікових записів Google не потребують
> проекту Google Cloud.

Якщо ви входите під корпоративним або навчальним обліковим записом, вам може
знадобитися налаштувати проект.

1.  [Знайдіть свій Google Cloud Project ID](https://support.google.com/googleapi/answer/7014113).
2.  [Увімкніть Gemini for Cloud API](https://cloud.google.com/gemini/docs/discover/set-up-gemini#enable-api).
3.  [Налаштуйте необхідні дозволи IAM](https://cloud.google.com/gemini/docs/discover/set-up-gemini#grant-iam).
4.  Встановіть змінну `GOOGLE_CLOUD_PROJECT`:

    ```bash
    export GOOGLE_CLOUD_PROJECT="ВАШ_PROJECT_ID"
    ```

## Збереження змінних середовища <a id="persisting-vars"></a>

Щоб не вводити змінні кожного разу:

1.  **Додайте їх у файл конфігурації оболонки:** Додайте команди `export ...` у
    файл `~/.bashrc`, `~/.zshrc` або `~/.profile` та перезавантажте конфігурацію
    (`source ~/.bashrc`).

2.  **Використовуйте файл `.env`:** Створіть файл `.gemini/.env` у каталозі
    проекту або домашньому каталозі. Gemini CLI автоматично завантажує змінні з
    першого знайденого файлу `.env`. Рекомендується використовувати
    `.gemini/.env`.

    Приклад:

    ```bash
    mkdir -p ~/.gemini
    cat >> ~/.gemini/.env <<'EOF'
    GOOGLE_CLOUD_PROJECT="vash-project-id"
    EOF
    ```

## Робота в середовищах Google Cloud <a id="cloud-env"></a>

У середовищах Google Cloud Shell або Compute Engine аутентифікація зазвичай
відбувається автоматично за допомогою вбудованих облікових даних середовища.

## Робота в безголовому режимі (Headless) <a id="headless"></a>

[Безголовий режим](../cli/headless) використовуватиме існуючі облікові дані,
якщо вони закешовані. Якщо ні — використовуйте змінні середовища для ключа API
або Vertex AI.

## Що далі?

Метод аутентифікації впливає на квоти, ціни та умови використання. Дізнайтеся
більше:

- [Gemini CLI: Квоти та ціни](../quota-and-pricing.md).
- [Gemini CLI: Умови використання та Політика конфіденційності](../tos-privacy.md).
