# Інструмент оболонки (`run_shell_command`)

Цей документ описує інструмент `run_shell_command` для Gemini CLI.

## Опис

Використовуйте `run_shell_command` для взаємодії із системою, запуску скриптів
або виконання операцій командного рядка. Інструмент виконує вказану команду
терміналу, включаючи інтерактивні команди (наприклад, `vim`, `git rebase -i`),
якщо увімкнено відповідне налаштування.

На Windows команди виконуються через PowerShell, на інших платформах — через
`bash -c`.

### Аргументи

- `command` (рядок, обов'язково): Команда для виконання.
- `description` (рядок, опціонально): Короткий опис мети команди.
- `directory` (рядок, опціонально): Каталог для виконання (відносно кореня
  проекту).

## Як працює `run_shell_command`

Команда виконується як підпроцес. Підтримується запуск у фоновому режимі через
`&`. Інструмент повертає:

- `Stdout`/`Stderr`: Вивід команди.
- `Exit Code`: Код виходу.
- `Background PIDs`: Список ID фонових процесів.

## Інтерактивні команди

Інструмент підтримує інтерактивні команди за допомогою псевдотерміналу (pty). Ви
можете запускати редактори (`vim`, `nano`), утиліти типу `htop` або
інтерактивний `git rebase`.

Щоб перемикати фокус між вводом Gemini та запущеною інтерактивною командою,
натисніть **Ctrl+F**.

## Обмеження команд

Ви можете обмежити список дозволених команд у файлі `settings.json`:

- `tools.core`: Список дозволених префіксів команд, наприклад
  `run_shell_command(git)`.
- `tools.exclude`: Список заборонених префіксів, наприклад
  `run_shell_command(rm)`.

**Важливо:** Валідація відбувається за префіксом. Дозвіл на `git` автоматично
дозволяє `git status`, `git log` тощо. Чорний список (`exclude`) має пріоритет
над білим (`core`).

### Приклади обмежень

**Дозволити лише git та npm:**

```json
{
  "tools": {
    "core": ["run_shell_command(git)", "run_shell_command(npm)"]
  }
}
```

**Заборонити всі команди:**

```json
{
  "tools": {
    "exclude": ["run_shell_command"]
  }
}
```

## Нотатка з безпеки

Обмеження через `exclude` базуються на простому співпадінні рядків і не є
надійним механізмом захисту від зловмисників. Для безпеки завжди використовуйте
білий список (`core`) та запускайте інструменти у пісочниці.
