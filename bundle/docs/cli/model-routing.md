## Маршрутизація моделей (Model routing)

Gemini CLI включає функцію маршрутизації моделей, яка автоматично перемикається
на резервну модель у разі збою основної. Ця функція увімкнена за замовчуванням і
забезпечує стабільність роботи, коли основна модель недоступна.

## Як це працює

Маршрутизація керується сервісом `ModelAvailabilityService`, який стежить за
станом моделей і автоматично перенаправляє запити на основі визначених політик.

1.  **Збій моделі:** Якщо обрана модель не спрацювала (наприклад, через
    вичерпання квоти або помилки сервера), CLI запускає процес перемикання
    (fallback).
2.  **Згода користувача:** Залежно від причини збою, CLI може запитати вас про
    перемикання на резервну модель (за замовчуванням запит з'являється завжди).
3.  **Перемикання:** Після підтвердження CLI використовуватиме резервну модель
    для поточного кроку або до кінця сесії.

### Пріоритет вибору моделі

Модель, яку використовує Gemini CLI, визначається в такому порядку (вищий номер
перекриває нижчий):

1.  **Прапорець `--model`:** Модель, вказана при запуску, має найвищий
    пріоритет.
2.  **Змінна середовища `GEMINI_MODEL`:** Використовується, якщо немає прапорця.
3.  **Параметр `model.name` у `settings.json`:** Використовується, якщо не
    задано попередні пункти.
4.  **Модель за замовчуванням:** Якщо нічого не налаштовано, використовується
    режим `auto`.
