# Контрольні точки (Checkpointing)

Gemini CLI включає функцію "Контрольні точки", яка автоматично зберігає знімок
стану вашого проекту перед будь-якими змінами файлів, що вносяться інструментами
ШІ. Це дозволяє вам безпечно експериментувати та застосовувати зміни коду,
знаючи, що ви можете миттєво повернутися до стану до запуску інструменту.

## Як це працює

Коли ви схвалюєте роботу інструменту, що змінює файлову систему (наприклад,
`write_file` або `replace`), CLI автоматично створює "контрольну точку". Ця
точка включає:

1.  **Git-знімок:** Створюється коміт у спеціальному "тіньовому"
    Git-репозиторії, розташованому у вашому домашньому каталозі
    (`~/.gemini/history/<project_hash>`). Цей знімок фіксує повний стан файлів
    вашого проекту в цей момент. Він **не** заважає роботі власного
    Git-репозиторію вашого проекту.
2.  **Історія розмови:** Зберігається вся розмова з агентом до цього моменту.
3.  **Виклик інструменту:** Зберігається конкретний виклик інструменту, який мав
    бути виконаний.

Якщо ви хочете скасувати зміни або просто повернутися назад, ви можете
скористатися командою `/restore`. Відновлення контрольної точки:

- Поверне всі файли у вашому проекті до стану, зафіксованого у знімку.
- Відновить історію розмови в CLI.
- Повторно запропонує оригінальний виклик інструменту, дозволяючи вам запустити
  його знову, змінити або проігнорувати.

Усі дані контрольних точок зберігаються локально на вашій машині.

## Увімкнення функції

Функція контрольних точок вимкнена за замовчуванням. Щоб увімкнути її,
відредагуйте файл `settings.json`.

Додайте наступний ключ:

```json
{
  "general": {
    "checkpointing": {
      "enabled": true
    }
  }
}
```

## Використання команди `/restore`

Після увімкнення контрольні точки створюються автоматично. Для керування ними
використовуйте команду `/restore`.

### Список доступних точок

Щоб побачити список усіх збережених точок для поточного проекту, запустіть:

```
/restore
```

CLI покаже список файлів контрольних точок. Імена файлів зазвичай складаються з
мітки часу, імені файлу та назви інструменту (наприклад,
`2025-06-22T10-00-00_000Z-my-file.txt-write_file`).

### Відновлення конкретної точки

Щоб відновити проект до певної точки, вкажіть її ім'я:

```
/restore <checkpoint_file>
```

Після виконання команди ваші файли та розмова будуть негайно повернуті до стану
на момент створення точки, а оригінальний запит інструменту з'явиться знову.
