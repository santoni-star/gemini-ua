# Керування сесіями (Session Management)

Gemini CLI включає надійні функції керування сесіями, які автоматично зберігають
історію ваших розмов. Це дозволяє переривати роботу та відновлювати її саме з
того місця, де ви зупинилися, переглядати минулі взаємодії та ефективно керувати
історією.

## Автоматичне збереження

Щоразу, коли ви взаємодієте з Gemini CLI, ваша сесія автоматично зберігається.
Це відбувається у фоновому режимі без жодного ручного втручання.

- **Що зберігається:** Повна історія розмови, включаючи:
  - Ваші підказки та відповіді моделі.
  - Усі виконання інструментів (вхідні та вихідні дані).
  - Статистика використання токенів (вхідні/вихідні/кешовані тощо).
  - Підсумки міркувань асистента (якщо доступні).
- **Місце зберігання:** Сесії зберігаються у
  `~/.gemini/tmp/<project_hash>/chats/`.
- **Область дії:** Сесії прив'язані до проекту. Зміна каталогу на інший проект
  автоматично перемкне вас на історію сесій цього проекту.

## Відновлення сесій

Ви можете відновити попередню сесію, щоб продовжити розмову зі збереженням
усього попереднього контексту.

### З командного рядка

При запуску CLI ви можете використовувати прапорець `--resume` (або `-r`):

- **Відновити останню:**

  ```bash
  gemini-ua --resume
  ```

  Це негайно завантажить найсвіжішу сесію.

- **Відновити за індексом:** Спочатку перегляньте список доступних сесій (див.
  [Список сесій](#listing-sessions)), а потім використовуйте номер індексу:

  ```bash
  gemini-ua --resume 1
  ```

- **Відновити за ID:** Ви також можете вказати повний UUID сесії:
  ```bash
  gemini-ua --resume a1b2c3d4-e5f6-7890-abcd-ef1234567890
  ```

### Через інтерактивний інтерфейс

Під час роботи CLI ви можете використати команду `/resume`, щоб відкрити
**Браузер сесій**:

```text
/resume
```

Це відкриє інтерактивний інтерфейс, де ви можете:

- **Переглядати:** Прокручувати список ваших минулих сесій.
- **Попередній перегляд:** Бачити деталі, такі як дата сесії, кількість
  повідомлень та перша підказка користувача.
- **Пошук:** Натисніть `/`, щоб увійти в режим пошуку, а потім введіть текст для
  фільтрації сесій за ID або вмістом.
- **Вибір:** Натисніть `Enter`, щоб відновити вибрану сесію.

## Керування сесіями

### Список сесій

Щоб побачити список усіх доступних сесій для поточного проекту з командного
рядка:

```bash
gemini-ua --list-sessions
```

Приклад виводу:

```text
Available sessions for this project (3):

  1. Виправлення багу в auth (2 дні тому) [a1b2c3d4]
  2. Рефакторинг схеми БД (5 годин тому) [e5f67890]
  3. Оновлення документації (Щойно) [abcd1234]
```

### Видалення сесій

Ви можете видаляти старі або непотрібні сесії, щоб звільнити місце або очистити
історію.

**З командного рядка:** Використовуйте прапорець `--delete-session` з індексом
або ID:

```bash
gemini-ua --delete-session 2
```

**З браузера сесій:**

1.  Відкрийте браузер командою `/resume`.
2.  Перейдіть до сесії, яку хочете видалити.
3.  Натисніть `x`.

## Конфігурація

Ви можете налаштувати спосіб керування історією сесій у файлі `settings.json`.

### Очищення сесій (Retention)

Щоб запобігти нескінченному зростанню історії, ви можете увімкнути політику
автоматичного очищення.

```json
{
  "general": {
    "sessionRetention": {
      "enabled": true,
      "maxAge": "30d", // Зберігати сесії протягом 30 днів
      "maxCount": 50 // Зберігати 50 останніх сесій
    }
  }
}
```

- **`enabled`**: (boolean) Головний перемикач очищення сесій. Типово — `false`.
- **`maxAge`**: (string) Термін зберігання сесій (наприклад, "24h", "7d", "4w").
  Сесії, старіші за цей термін, будуть видалені.
- **`maxCount`**: (number) Максимальна кількість сесій для збереження.
  Найстаріші сесії, що перевищують цю кількість, будуть видалені.

### Ліміти сесій

Ви також можете обмежити довжину окремих сесій, щоб вікна контексту не ставали
занадто великими та дорогими.

```json
{
  "model": {
    "maxSessionTurns": 100
  }
}
```

- **`maxSessionTurns`**: (number) Максимальна кількість обмінів повідомленнями
  (користувач + модель), дозволена в одній сесії. Встановіть `-1` для
  безлімітного режиму (типово).
