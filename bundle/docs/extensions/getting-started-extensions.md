# Початок роботи з розширеннями Gemini CLI

Цей посібник проведе вас через процес створення вашого першого розширення для
Gemini CLI. Ви дізнаєтеся, як налаштувати нове розширення, додати власний
інструмент через сервер MCP, створити власну команду та надати контекст моделі
за допомогою файлу `GEMINI.md`.

## Попередні вимоги

Перед початком переконайтеся, що у вас встановлено Gemini CLI та ви маєте базові
знання Node.js та TypeScript.

## Крок 1: Створення нового розширення

Найпростіший спосіб почати — використати один із вбудованих шаблонів. Ми
використаємо приклад `mcp-server`.

Виконайте наступну команду, щоб створити каталог `my-first-extension` із файлами
шаблону:

```bash
gemini-ua extensions new my-first-extension mcp-server
```

## Крок 2: Розуміння файлів розширення

### `gemini-extension.json`

Це файл маніфесту вашого розширення. Він вказує Gemini CLI, як завантажувати та
використовувати ваше розширення.

```json
{
  "name": "my-first-extension",
  "version": "1.0.0",
  "mcpServers": {
    "nodeServer": {
      "command": "node",
      "args": ["${extensionPath}${/}dist${/}example.js"],
      "cwd": "${extensionPath}"
    }
  }
}
```

- `name`: Унікальна назва вашого розширення.
- `mcpServers`: Цей розділ визначає сервери Model Context Protocol (MCP), які
  додають нові інструменти. Змінна `${extensionPath}` автоматично замінюється
  абсолютним шляхом до каталогу встановлення.

### `example.ts`

Цей файл містить вихідний код вашого сервера MCP. Це простий сервер Node.js,
який використовує `@modelcontextprotocol/sdk`.

## Крок 3: Збірка та прив'язка розширення

Для локальної розробки вам потрібно скомпілювати код та створити посилання на
розширення.

1.  **Встановіть залежності:**

    ```bash
    cd my-first-extension
    npm install
    ```

2.  **Зберіть сервер:**

    ```bash
    npm run build
    ```

3.  **Прив'яжіть розширення (Link):** Команда `link` створює символічне
    посилання на ваше розширення, тому будь-які зміни будуть відображатися
    миттєво без перевстановлення.
    ```bash
    gemini-ua extensions link .
    ```

Тепер перезапустіть сесію `gemini-ua`. Новий інструмент `fetch_posts` буде
доступний.

## Крок 4: Додавання власної команди

Створіть файл `commands/fs/grep-code.toml`:

```toml
prompt = """
Зроби підсумок результатів для шаблону `{{args}}`.

Результати пошуку:
!{grep -r {{args}} .}
"""
```

Після перезапуску ви зможете використовувати команду `/fs:grep-code "шаблон"`.

## Крок 5: Додавання файлу `GEMINI.md`

Ви можете надати постійний контекст моделі, додавши файл `GEMINI.md` у корінь
каталогу розширення. Це корисно для навчання моделі тому, як поводитися або як
використовувати ваші нові інструменти.
