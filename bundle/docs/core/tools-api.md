# Ядро Gemini CLI: API інструментів

Ядро Gemini CLI (`packages/core`) має надійну систему для визначення, реєстрації
та виконання інструментів. Ці інструменти розширюють можливості моделі Gemini,
дозволяючи їй взаємодіяти з локальним середовищем, отримувати веб-контент та
виконувати дії, що виходять за межі простої генерації тексту.

## Основні концепції

- **Інструмент (Tool):** Інтерфейс та базовий клас (`BaseTool`), що визначають
  контракт для всіх інструментів. Кожен інструмент повинен мати:
  - `name`: Унікальна внутрішня назва.
  - `description`: Опис того, що робить інструмент (передається моделі Gemini).
  - `parameterSchema`: Схема JSON, що визначає параметри, які приймає
    інструмент.
  - `execute()`: Основний метод, який виконує дію та повертає `ToolResult`.

- **`ToolResult`:** Об'єкт, що містить результат виконання:
  - `llmContent`: Фактичний контент для контексту моделі. Може містити текст,
    зображення, аудіо тощо.
  - `returnDisplay`: Зручний для читання рядок (зазвичай Markdown) або об'єкт
    для відображення в інтерфейсі CLI.

- **Реєстр інструментів (Tool Registry):** Клас, відповідальний за зберігання
  вбудованих інструментів та динамічне виявлення нових (через команди або
  сервери MCP).

## Вбудовані інструменти

- **Файлова система:** `read_file`, `write_file`, `list_directory`, `grep`,
  `glob`, `replace`, `read_many_files`.
- **Виконання:** `run_shell_command`.
- **Веб:** `web_fetch`, `google_web_search`.
- **Пам'ять:** `save_memory`.

## Потік виконання

1.  **Запит моделі:** Модель вирішує використати інструмент і повертає
    `FunctionCall`.
2.  **Валідація:** Ядро перевіряє параметри та (якщо потрібно) запитує
    підтвердження у користувача.
3.  **Виконання:** Ядро викликає метод `execute()` інструменту.
4.  **Обробка результату:** Результат (`llmContent`) надсилається назад моделі
    для формування відповіді, а `returnDisplay` показується користувачеві.

## Створення власних інструментів

Ви можете додати власні інструменти двома способами:

- **Через команду виявлення:** Налаштуйте `tools.discoveryCommand` у
  `settings.json`, щоб CLI реєстрував інструменти з виводу вашого скрипта.
- **Через сервери MCP:** Налаштуйте `mcpServers` для підключення до серверів, що
  працюють за протоколом Model Context Protocol.
